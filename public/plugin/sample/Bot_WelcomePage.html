<apex:page action="{!onLoad}" showHeader="false" sidebar="false" standardStylesheets="false" applyBodyTag="false" applyHtmlTag="false">
    <html>
        <head>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
            <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
            <style>
                <!--To display Welcome message always at center of the screen-->
                .centered {
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                }
                <!-- Welcome message nested div block styling-->
                .sub-div1 {
                    display:block;
                    border-style: solid;
                    border-top-left-radius: 20px;
                    border-top-right-radius: 20px;
                    padding: 10px;
                    background: #ff9833;
                    color: #ffffff;
                }
                <!-- Welcome message nested div block styling-->
                .sub-div2 {
                    display:block;
                    background: white;
                    border-bottom-style: ridge;
                    border-bottom-width: 2px;
                }
                <!-- Welcome message inner nested div block styling-->
                .sub-div2-inline-divs {
                    display:inline-block;
                    padding: 20px;
                }
                <!-- Welcome message to disable SampleRequest and AskAnExpert Status Tracking-->
                .disable-items {
                    color: #a9a9a9;
                }
                <!-- Background Loader CSS-->
                .requiredLoaderBG {
                    background-color    :   #fff;
                    /*opacity             :   0.8;*/
                    filter              :   alpha(opacity=60);
                    background-image    :   url('{!$Resource.Loader_GIF}');
                    background-position :   center center;
                    background-repeat   :   no-repeat;
                    height              :   100%;
                    left                :   0;
                    position            :   fixed;
                    text-align          :   center;
                    top                 :   0;
                    width               :   100%;
                    z-index             :   1001;
                }
                <!--Customize Chat widget color https://docs.kommunicate.io/docs/web-customization.html>-->
                .mck-msg-right .mck-msg-box, .mck-box-top, #mck-msg-new {
                    background: #ff9833 !important;
                    background-color: #ff9833 !important;
                    border-color: #ff9833 !important;
                }

                #mck-sidebox {
                    /*set chat widget height */
                    height:90% !important;
                }

                @media (min-width: 310px) {
                    /*set chat widget margin */
                    #mck-sidebox {
                        right: 10% !important;
                        bottom: 50px !important;
                    }
                }

                @media (min-width: 510px){
                    /* set the chat widget width*/
                    .mck-sidebox.fade.in, .mck-box .mck-box-sm {
                        width: 900px !important;
                    }
                }

                <!-- Hide Kommunicate Launcher -->
                #mck-sidebox-launcher {
                    display: none !important;
                }
                <!-- Hide Kommunicate Chat-Widget Back Button-->
                #mck-conversation-back-btn {
                    display: none;
                }
                <!-- Hide Kommunicate Chat-Widget Close Button-->
                .mck-box-close {
                    display: none !important;
                }
                <!-- Kommunicate avatar color customized-->
                .alpha_A, .alpha_B, .alpha_C, .alpha_D, .alpha_E, .alpha_F, .alpha_G, .alpha_H, .alpha_I, .alpha_J, .alpha_K, .alpha_L, .alpha_M, .alpha_N, .alpha_O, .alpha_P, .alpha_Q, .alpha_R, .alpha_S, .alpha_T, .alpha_U, .alpha_V, .alpha_W, .alpha_X, .alpha_Y, .alpha_Z {
                    background-color: #ff9833 !important;
                }
                <!-- Kommunicate avatar name color customized-->
                .mck-text-a, .mck-text-b, .mck-text-c, .mck-text-d, .mck-text-e, .mck-text-f, .mck-text-g, .mck-text-h, .mck-text-i, .mck-text-j, .mck-text-k, .mck-text-l, .mck-text-m, .mck-text-n, .mck-text-o, .mck-text-p, .mck-text-q, .mck-text-r, .mck-text-s, .mck-text-t, .mck-text-u, .mck-text-v, .mck-text-w, .mck-text-x, .mck-text-y, .mck-text-z {
                    color: #ff9833 !important;
                }
                <!-- Kommunicate Quick Replies Border color customized-->
                .km-cta-button {
                    border: 1px solid #ff9833 !important;
                }
                <!-- Kommunicate Quick Replies text color customized-->
                .mck-msg-box-rich-text-container {
                    color: #ff9833 !important;
                }
            </style>
        </head>

        <body>
            <apex:form id="TheMainForm">
                <div id="TheMainDiv" class="centered">
                    <img  src="{!$Resource.DFE_Pharma_Bot_Icon}" height="80px" width="80px"/>

                    <div class="sub-div1">
                        <h2>Welcome !!</h2>
                        <h4>I am your personal assistant from DFE Pharma, and I am here to help you.</h4>
                    </div>

                    <div class="sub-div2">
                        <div class="sub-div2-inline-divs"><i class="fa fa-file-text-o" style="font-size:15px;"></i></div>
                        <!-- <div class="sub-div2-inline-divs"><apex:commandLink value="Document Retrieval" onclick="startConvo()" status="LoadingStatus" reRender="TheMainForm" style="text-decoration-line:none;color:#000000;"/></div> -->
                         <div id="test" onclick="startConvo()" hidden> startConversation</div>
                    </div>

                    <div class="sub-div2 disable-items">
                        <div class="sub-div2-inline-divs"><i class="material-icons" style="font-size:15px;">gps_fixed</i></div>
                        <div class="sub-div2-inline-divs">Sample Request Status Tracking</div>
                    </div>

                    <div class="sub-div2 disable-items">
                        <div class="sub-div2-inline-divs"><i class="material-icons" style="font-size:15px;">gps_fixed</i></div>
                        <div class="sub-div2-inline-divs">Ask an Expert Status Tracking</div>
                    </div>

                    <div style="padding-left:40%;padding-top:15px;padding-bottom:15px;">
                        <img  src="{!$Resource.DFE_Pharma_Logo}" height="25px" onclick="window.open('https://www.dfepharma.com/', '_blank');"/>
                    </div>
                </div>
                <apex:actionstatus startStyleClass="requiredLoaderBG" id="LoadingStatus"/>
            </apex:form>

            <div id="loader" class="requiredLoaderBG"></div>

            <script type="text/javascript">
                window.onload = function() {
                    document.getElementById("loader").style.display="block";
                    document.getElementById("loader").style.display="none";
                }
            </script>

            <script type="text/javascript">
                (function(d, m){
                    /*---------------- Kommunicate settings start ----------------*/

                     var kommunicateSettings = {"appId":"1d176033f3b0fbc064a2b9326a227d67c","botIds":["live-excipient-bot"],"conversationTitle":"Live Excipient Bot","isAnonymousChat":true,
                     onInit:function(){
                       console.log("sucess");
                     document.getElementById('test').removeAttribute("hidden");
                     }
                     };

                    /*----------------- Kommunicate settings end ------------------*/

                    var s = document.createElement("script");
                    s.type = "text/javascript";
                    s.async = true;
                    s.src = "https://api.kommunicate.io/kommunicate.app";
                    var h = document.getElementsByTagName("head")[0];
                    h.appendChild(s);
                    window.kommunicate = m;
                    m._globals = kommunicateSettings;
                })(document, window.kommunicate || {});

                function startConvo() {
                    document.getElementById('TheMainDiv').style.display = 'none';
                    console.log("conversation created");
                    var conversationDetail = { agentId: "pooja.bhat@kvpcorp.com", botIds: ["live-excipient-bot"]};
                    Kommunicate.startConversation(conversationDetail, function (response) {
                        console.log("new conversation created");
                    });
                }
            </script>
        </body>
    </html>
</apex:page>
